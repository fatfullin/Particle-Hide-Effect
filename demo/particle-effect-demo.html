<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест автоматического скрытия элементов</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        h1, h2 {
            color: #333;
        }
        .panels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .panel {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        .panel-header {
            font-weight: bold;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .content {
            cursor: pointer;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 4px;
            transition: background-color 0.3s;
            text-align: center;
        }
        .content:hover {
            background-color: #eaeaea;
        }
        .hidden-class {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        button {
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #2d76d3;
        }
        pre {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
            overflow-x: auto;
        }
        .status {
            margin-top: 5px;
            font-size: 12px;
            color: #888;
        }
    </style>
</head>
<body>
    <h1>Тест автоматического скрытия элементов</h1>
    <p>Эта страница демонстрирует различные методы скрытия элементов с помощью библиотеки ParticleEffect.</p>
    
    <h2>Режимы скрытия элементов</h2>
    <div class="panels">
        <!-- Panel 1: Default (opacity-visibility) -->
        <div class="panel">
            <div class="panel-header">1. По умолчанию (opacity-visibility)</div>
            <div class="content" id="default-panel">
                <h3>Нажмите для скрытия</h3>
                <p>Стандартное автоскрытие (по умолчанию)</p>
            </div>
            <div class="status" id="default-status">Статус: Неактивен</div>
            <button id="default-toggle">Переключить</button>
            <pre>
autoHideTarget: true // по умолчанию
            </pre>
        </div>

        <!-- Panel 2: Slow Fade -->
        <div class="panel">
            <div class="panel-header">2. Медленное затухание</div>
            <div class="content" id="opacity-panel">
                <h3>Нажмите для скрытия</h3>
                <p>Медленное затухание (1 секунда)</p>
            </div>
            <div class="status" id="opacity-status">Статус: Неактивен</div>
            <button id="opacity-toggle">Переключить</button>
            <pre>
autoHideTarget: true,
targetFadeDuration: 1.0
            </pre>
        </div>

        <!-- Panel 3: Different timing function -->
        <div class="panel">
            <div class="panel-header">3. Функция перехода</div>
            <div class="content" id="visibility-panel">
                <h3>Нажмите для скрытия</h3>
                <p>С другой функцией перехода</p>
            </div>
            <div class="status" id="visibility-status">Статус: Неактивен</div>
            <button id="visibility-toggle">Переключить</button>
            <pre>
autoHideTarget: true,
targetTimingFunction: 'ease-in-out'
            </pre>
        </div>

        <!-- Panel 4: Specific content -->
        <div class="panel">
            <div class="panel-header">4. Определенный контент</div>
            <div class="content" id="display-panel">
                <h3>Нажмите для скрытия</h3>
                <p>Скрывается только параграф</p>
            </div>
            <div class="status" id="display-status">Статус: Неактивен</div>
            <button id="display-toggle">Переключить</button>
            <pre>
autoHideTarget: true,
targetContentSelector: 'p'
            </pre>
        </div>

        <!-- Panel 5: Using CSS Class -->
        <div class="panel">
            <div class="panel-header">5. Через CSS класс</div>
            <div class="content" id="class-panel">
                <h3>Нажмите для скрытия</h3>
                <p>Через пользовательский CSS класс</p>
            </div>
            <div class="status" id="class-status">Статус: Неактивен</div>
            <button id="class-toggle">Переключить</button>
            <pre>
autoHideTarget: true,
targetHideClass: 'hidden-class'
            </pre>
        </div>
        
        <!-- Panel 6: Auto Hide Disabled -->
        <div class="panel">
            <div class="panel-header">6. Скрытие отключено</div>
            <div class="content" id="disabled-panel">
                <h3>Нажмите для эффекта</h3>
                <p>Автоскрытие отключено</p>
            </div>
            <div class="status" id="disabled-status">Статус: Неактивен</div>
            <button id="disabled-toggle">Переключить</button>
            <pre>
autoHideTarget: false
            </pre>
        </div>
    </div>

    <!-- Подключаем файл библиотеки напрямую, без ES модулей -->
    <script src="../dist/particle-effect.umd.js"></script>
    
    <script>
        // Utility function to update status
        function updateStatus(id, active) {
            document.getElementById(id).textContent = `Статус: ${active ? 'Активен' : 'Неактивен'}`;
        }

        // 1. Default
        const defaultPanel = document.getElementById('default-panel');
        const defaultEffect = new ParticleEffect(defaultPanel, {
            autoStart: false,
            autoHideTarget: true
        });
        defaultPanel.addEventListener('click', () => {
            defaultEffect.toggle();
            updateStatus('default-status', defaultEffect.isActive);
        });
        document.getElementById('default-toggle').addEventListener('click', () => {
            defaultEffect.toggle();
            updateStatus('default-status', defaultEffect.isActive);
        });

        // 2. Slow fade
        const opacityPanel = document.getElementById('opacity-panel');
        const opacityEffect = new ParticleEffect(opacityPanel, {
            autoStart: false,
            autoHideTarget: true,
            targetFadeDuration: 1.0
        });
        opacityPanel.addEventListener('click', () => {
            opacityEffect.toggle();
            updateStatus('opacity-status', opacityEffect.isActive);
        });
        document.getElementById('opacity-toggle').addEventListener('click', () => {
            opacityEffect.toggle();
            updateStatus('opacity-status', opacityEffect.isActive);
        });

        // 3. Different timing function
        const visibilityPanel = document.getElementById('visibility-panel');
        const visibilityEffect = new ParticleEffect(visibilityPanel, {
            autoStart: false,
            autoHideTarget: true,
            targetTimingFunction: 'ease-in-out'
        });
        visibilityPanel.addEventListener('click', () => {
            visibilityEffect.toggle();
            updateStatus('visibility-status', visibilityEffect.isActive);
        });
        document.getElementById('visibility-toggle').addEventListener('click', () => {
            visibilityEffect.toggle();
            updateStatus('visibility-status', visibilityEffect.isActive);
        });

        // 4. Specific content
        const displayPanel = document.getElementById('display-panel');
        const displayEffect = new ParticleEffect(displayPanel, {
            autoStart: false,
            autoHideTarget: true,
            targetContentSelector: 'p'
        });
        displayPanel.addEventListener('click', () => {
            displayEffect.toggle();
            updateStatus('display-status', displayEffect.isActive);
        });
        document.getElementById('display-toggle').addEventListener('click', () => {
            displayEffect.toggle();
            updateStatus('display-status', displayEffect.isActive);
        });

        // 5. Using CSS Class
        const classPanel = document.getElementById('class-panel');
        const classEffect = new ParticleEffect(classPanel, {
            autoStart: false,
            autoHideTarget: true,
            targetHideClass: 'hidden-class'
        });
        classPanel.addEventListener('click', () => {
            classEffect.toggle();
            updateStatus('class-status', classEffect.isActive);
        });
        document.getElementById('class-toggle').addEventListener('click', () => {
            classEffect.toggle();
            updateStatus('class-status', classEffect.isActive);
        });

        // 6. Auto Hide Disabled
        const disabledPanel = document.getElementById('disabled-panel');
        const disabledEffect = new ParticleEffect(disabledPanel, {
            autoStart: false,
            autoHideTarget: false
        });
        disabledPanel.addEventListener('click', () => {
            disabledEffect.toggle();
            updateStatus('disabled-status', disabledEffect.isActive);
        });
        document.getElementById('disabled-toggle').addEventListener('click', () => {
            disabledEffect.toggle();
            updateStatus('disabled-status', disabledEffect.isActive);
        });
    </script>
</body>
</html> 